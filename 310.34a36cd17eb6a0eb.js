"use strict";(self.webpackChunkown_stamp_ng=self.webpackChunkown_stamp_ng||[]).push([[310],{4067:(S,f,_)=>{_.d(f,{n:()=>K});var t=_(6435),c=_(3075),C=_(283),h=_(2e3),u=_(1171),m=_(9808);const v=["previewWrap"],d=["previewDummy"];function w(r,s){if(1&r&&t._UZ(0,"img",7),2&r){const e=t.oxw();t.s9C("src",e.backgroundImage,t.LSH)}}function P(r,s){if(1&r&&t._UZ(0,"img",7),2&r){const e=t.oxw();t.s9C("src",e.backgroundImage,t.LSH)}}function x(r,s){if(1&r&&t._UZ(0,"img",12),2&r){const e=t.oxw().index,i=t.oxw();t.s9C("src",i.frontImages[e].src,t.LSH)}}function b(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"label",13)(1,"input",14),t.NdJ("change",function(o){t.CHM(e);const n=t.oxw().index;return t.oxw().addStamp(o,n)}),t.qZA()()}}function M(r,s){if(1&r&&(t.TgZ(0,"div",8)(1,"span",9),t.YNc(2,x,1,1,"img",10),t.YNc(3,b,2,0,"label",11),t.qZA()()),2&r){const e=s.index,i=t.oxw();t.xp6(2),t.Q6J("ngIf",i.frontImages[e]),t.xp6(1),t.Q6J("ngIf",i.canShowStampButton)}}function O(r,s){if(1&r&&t._UZ(0,"div",15,16),2&r){const e=t.oxw();t.Udp("min-height",e.minHeightDummy)}}function a(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"label",17)(1,"input",14),t.NdJ("change",function(o){return t.CHM(e),t.oxw().addBackground(o)}),t.qZA()()}}const l=function(){return[]};let g=(()=>{class r{constructor(e){this._storeService=e,this.totalStamps=0,this.frontImages=[],this.canShowButtonForBackground=!1,this.canShowStampButton=!0,this._currentSelect="",this.imageData=new t.vpe,this.scrollToCropper=new t.vpe,this.addBackgroundBtnConfig={type:"",imageNumber:[]},this.addStampBtnConfig={type:"",imageNumber:[]},this.constructorConfig={type:"",costPerPage:0,costPerItem:"",stamp:{resolution:{width:0,height:0},size:{width:"",height:""}},background:{resolution:{width:0,height:0},size:{width:"",height:""}}}}addImage(e,i){const o=e.target.files[0];let n=this,p=new FileReader;p.readAsDataURL(o),p.onload=()=>{n.imageData.emit({fileName:o.name,image:{resolution:{width:i.image.resolution.width,height:i.image.resolution.height},size:{width:i.image.size.width,height:i.image.size.height}},imageSrc:p.result,imagesToFill:{type:i.imagesToFill.type,imageNumber:i.imagesToFill.imageNumber}})},p.onerror=function(j){console.log("Error: ",j)}}addBackground(e){let i=this.addBackgroundBtnConfig.imageNumber.concat();this.addImage(e,{image:{resolution:{width:this.constructorConfig.background.resolution.width,height:this.constructorConfig.background.resolution.height},size:{width:this.constructorConfig.background.size.width,height:this.constructorConfig.background.size.height}},imagesToFill:{type:this.addBackgroundBtnConfig.type,imageNumber:i}}),this.scrollToCropper.emit(),this._storeService.currentSelect.next("background")}addStamp(e,i){let o=[];o.push(i+1),this.addImage(e,{image:{resolution:{width:this.constructorConfig.stamp.resolution.width,height:this.constructorConfig.stamp.resolution.height},size:{width:this.constructorConfig.stamp.size.width,height:this.constructorConfig.stamp.size.height}},imagesToFill:{type:this.addStampBtnConfig.type,imageNumber:o}}),this.scrollToCropper.emit(),this._storeService.currentSelect.next("front")}canShowBackgroundButton(){this.canShowButtonForBackground=!this.backgroundImage&&("stamps-6"===this.constructorConfig.type||"stamps-9"===this.constructorConfig.type||"postcard"===this.constructorConfig.type||"envelope-c6"===this.constructorConfig.type||"envelope-dl"===this.constructorConfig.type)&&"background"!==this._currentSelect}drawImages(e){this.frontImages=e.images.front,this.backgroundImage=e.images.background.src,this.canShowBackgroundButton()}setMinHeight(){("stamps-6"===this.constructorConfig.type||"stamps-9"===this.constructorConfig.type)&&(this.minHeight=Math.floor(this._previewWrap.nativeElement.offsetWidth*this.constructorConfig.background.resolution.height/this.constructorConfig.background.resolution.width)+"px"),("postcard"===this.constructorConfig.type||"envelope-c6"===this.constructorConfig.type||"envelope-dl"===this.constructorConfig.type)&&(this.minHeightDummy=Math.floor(this._previewDummy.nativeElement.offsetWidth*this.constructorConfig.background.resolution.height/this.constructorConfig.background.resolution.width)+"px")}setWrapperClass(){this.wrapperClass={"image-preview":!0,"image-preview_envelope":"envelope-c6"===this.constructorConfig.type||"envelope-dl"===this.constructorConfig.type,"image-preview_postcard":"postcard"===this.constructorConfig.type,"image-preview__stamps-6":"stamps-6"===this.constructorConfig.type,"image-preview__stamps-9":"stamps-9"===this.constructorConfig.type,"image-preview__stamps-28":"stamps-28"===this.constructorConfig.type,"image-preview__stamps-28-dif":"stamps-28-difference"===this.constructorConfig.type}}subscribeToStoreServiceOrder(){this._orderSubscriber=this._storeService.order.subscribe(e=>{this.drawImages(e)})}typeEnumeration(){switch(this.constructorConfig.type){case"envelope-c6":case"envelope-dl":case"postcard":this.totalStamps=0;break;case"stamps-6":this.totalStamps=6;break;case"stamps-9":this.totalStamps=9;break;case"stamps-28":this.totalStamps=28,this.canShowStampButton=!1;break;case"stamps-28-difference":this.totalStamps=28;break;default:console.error("need to set totalStamps")}}ngOnInit(){this.canShowBackgroundButton(),this.subscribeToStoreServiceOrder(),this.subscribeToCurrentSelect(),this.typeEnumeration(),this.setWrapperClass()}ngOnDestroy(){this._orderSubscriber.unsubscribe(),this._currentSelectSubscriber.unsubscribe()}ngAfterViewInit(){setTimeout(()=>{this.setMinHeight()})}onResize(){this.setMinHeight()}rotatePreview(e){this.constructorConfig=Object.assign(Object.assign({},this.constructorConfig),{background:{resolution:{width:e.resolution.width,height:e.resolution.height},size:{width:e.size.width,height:e.size.height}}}),this.setMinHeight()}subscribeToCurrentSelect(){this._currentSelectSubscriber=this._storeService.currentSelect.subscribe(e=>{this._currentSelect=e,this.canShowBackgroundButton()})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(h.d))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-image-preview"]],viewQuery:function(e,i){if(1&e&&(t.Gf(v,5),t.Gf(d,5)),2&e){let o;t.iGM(o=t.CRH())&&(i._previewWrap=o.first),t.iGM(o=t.CRH())&&(i._previewDummy=o.first)}},hostBindings:function(e,i){1&e&&t.NdJ("resize",function(){return i.onResize()},!1,t.Jf7)},inputs:{addBackgroundBtnConfig:"addBackgroundBtnConfig",addStampBtnConfig:"addStampBtnConfig",constructorConfig:"constructorConfig"},outputs:{imageData:"imageData",scrollToCropper:"scrollToCropper"},decls:8,vars:9,consts:[[3,"ngClass"],["previewWrap",""],["class","image-preview__bg-pic","alt","",3,"src",4,"ngIf"],[1,"image-preview__wrap"],["class","image-preview__item",4,"ngFor","ngForOf"],["class","image-preview__dummy",3,"min-height",4,"ngIf"],["class","image-preview__add-stamp",4,"ngIf"],["alt","",1,"image-preview__bg-pic",3,"src"],[1,"image-preview__item"],[1,"image-preview__mark"],["alt","","class","image-preview__mark-img",3,"src",4,"ngIf"],["class","image-preview__cross",4,"ngIf"],["alt","",1,"image-preview__mark-img",3,"src"],[1,"image-preview__cross"],["type","file",3,"change"],[1,"image-preview__dummy"],["previewDummy",""],[1,"image-preview__add-stamp"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0,1),t.YNc(2,w,1,1,"img",2),t.TgZ(3,"div",3),t.YNc(4,P,1,1,"img",2),t.YNc(5,M,4,2,"div",4),t.YNc(6,O,2,2,"div",5),t.qZA(),t.YNc(7,a,2,0,"label",6),t.qZA()),2&e&&(t.Udp("min-height",i.minHeight),t.Q6J("ngClass",i.wrapperClass),t.xp6(2),t.Q6J("ngIf",i.backgroundImage&&("stamps-6"===i.constructorConfig.type||"stamps-9"===i.constructorConfig.type||"stamps-28"===i.constructorConfig.type||"stamps-28-difference"===i.constructorConfig.type)),t.xp6(2),t.Q6J("ngIf",i.backgroundImage&&("postcard"===i.constructorConfig.type||"envelope-c6"===i.constructorConfig.type||"envelope-dl"===i.constructorConfig.type)),t.xp6(1),t.Q6J("ngForOf",t.DdM(8,l).constructor(i.totalStamps)),t.xp6(1),t.Q6J("ngIf","postcard"===i.constructorConfig.type||"envelope-c6"===i.constructorConfig.type||"envelope-dl"===i.constructorConfig.type),t.xp6(1),t.Q6J("ngIf",i.canShowButtonForBackground))},directives:[m.mk,m.O5,m.sg],styles:['.image-preview[_ngcontent-%COMP%]{position:relative;border:1px solid #4d504a;background:var(--section-background-2);background-position:center;background-size:cover;padding:3px 15px;max-width:280px;margin-bottom:12px}.image-preview__wrap[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap-reverse;align-items:flex-end;width:120px}.image-preview__cross[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;cursor:pointer}.image-preview__cross[_ngcontent-%COMP%]:before, .image-preview__cross[_ngcontent-%COMP%]:after{content:"";position:absolute;left:50%;top:50%;height:2px;width:24px;margin:-1px 0 0 -12px;background:#fff;border-radius:2px}.image-preview__cross[_ngcontent-%COMP%]:after{transform:rotate(90deg);transform-origin:center}.image-preview__cross[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;visibility:hidden;position:absolute;width:0;height:0}.image-preview__item[_ngcontent-%COMP%]{width:33.3333%}.image-preview__mark[_ngcontent-%COMP%]{display:block;position:relative;width:100%;max-width:40px;height:36px;background:rgba(14,47,75,.4);border:.5px solid #939498;overflow:hidden}.image-preview__mark[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background:#fff;opacity:0;transition:opacity .3s ease}.image-preview__mark[_ngcontent-%COMP%]:after{display:none;content:"";position:absolute;bottom:0;right:0;left:0;padding-bottom:45%;z-index:2;background:url(/../assets/img/image-preview__mark.jpg) no-repeat center;background-size:cover;border-top:1px solid #939498}.image-preview__mark-img[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1;object-fit:cover}.image-preview__dummy[_ngcontent-%COMP%]{width:100%;background:var(--section-background-2)}.image-preview__pic[_ngcontent-%COMP%]{display:block;width:100%;height:auto}.image-preview__add-stamp[_ngcontent-%COMP%], .image-preview__add-postcard[_ngcontent-%COMP%]{position:absolute;width:42px;height:42px;margin:-21px 0 0 -21px}.image-preview__add-stamp[_ngcontent-%COMP%]{background:none;border:none;top:34%;left:69%}.image-preview__add-stamp[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;visibility:hidden;position:absolute}.image-preview__add-postcard[_ngcontent-%COMP%]{top:50%;left:50%}.image-preview__add-stamp[_ngcontent-%COMP%]:before, .image-preview__add-stamp[_ngcontent-%COMP%]:after, .image-preview__add-postcard[_ngcontent-%COMP%]:before, .image-preview__add-postcard[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;top:50%;background:#fff;height:4px;width:100%;border-radius:2px;margin-top:-2px}.image-preview__add-stamp[_ngcontent-%COMP%]:after, .image-preview__add-postcard[_ngcontent-%COMP%]:after{transform:rotate(90deg);transform-origin:center}.image-preview_postcard[_ngcontent-%COMP%]   .image-preview__wrap[_ngcontent-%COMP%], .image-preview_envelope[_ngcontent-%COMP%]   .image-preview__wrap[_ngcontent-%COMP%]{position:relative;width:100%;border:8px solid #fff;box-shadow:var(--box-shadow-2)}.image-preview_postcard[_ngcontent-%COMP%]{border:none;background:none;padding:0;max-width:220px}.image-preview_envelope[_ngcontent-%COMP%]{padding:0;border:none;max-width:240px}.image-preview_envelope[_ngcontent-%COMP%]   .image-preview__add-stamp[_ngcontent-%COMP%]{top:50%;left:28%}.image-preview_envelope[_ngcontent-%COMP%]   .image-preview__wrap[_ngcontent-%COMP%]:before, .image-preview_envelope[_ngcontent-%COMP%]   .image-preview__wrap[_ngcontent-%COMP%]:after{content:"";position:absolute;right:8.93%;width:38.395%;height:8px;background:none;border-top:2px solid var(--border-color);border-bottom:2px solid var(--border-color);z-index:1}.image-preview_envelope[_ngcontent-%COMP%]   .image-preview__wrap[_ngcontent-%COMP%]:before{bottom:17px}.image-preview_envelope[_ngcontent-%COMP%]   .image-preview__wrap[_ngcontent-%COMP%]:after{bottom:37px}.image-preview__bg-pic[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}.image-preview__stamps-6[_ngcontent-%COMP%], .image-preview__stamps-9[_ngcontent-%COMP%]{display:flex;align-items:center}.image-preview__stamps-6[_ngcontent-%COMP%]   .image-preview__item[_ngcontent-%COMP%]:nth-child(5){width:66.6666%}.image-preview__stamps-9[_ngcontent-%COMP%]   .image-preview__mark[_ngcontent-%COMP%]{height:43px}.image-preview__stamps-9[_ngcontent-%COMP%]   .image-preview__add-stamp[_ngcontent-%COMP%]{top:50%;left:74%}.image-preview__stamps-28-dif[_ngcontent-%COMP%], .image-preview__stamps-28[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;max-width:180px;padding:10px}.image-preview__stamps-28-dif[_ngcontent-%COMP%]   .image-preview__wrap[_ngcontent-%COMP%], .image-preview__stamps-28[_ngcontent-%COMP%]   .image-preview__wrap[_ngcontent-%COMP%]{width:100%}.image-preview__stamps-28-dif[_ngcontent-%COMP%]   .image-preview__item[_ngcontent-%COMP%], .image-preview__stamps-28[_ngcontent-%COMP%]   .image-preview__item[_ngcontent-%COMP%]{width:25%}.image-preview__stamps-28-dif[_ngcontent-%COMP%]   .image-preview__mark[_ngcontent-%COMP%], .image-preview__stamps-28[_ngcontent-%COMP%]   .image-preview__mark[_ngcontent-%COMP%]{height:39px}.image-preview__stamps-28[_ngcontent-%COMP%]   .image-preview__mark[_ngcontent-%COMP%]:before{opacity:1}.image-preview_postcard[_ngcontent-%COMP%]{display:flex}.image-preview_postcard[_ngcontent-%COMP%]   .image-preview__add-stamp[_ngcontent-%COMP%]{top:50%;left:50%}@media screen and (min-width: 1024px){.image-preview[_ngcontent-%COMP%]{margin-bottom:21px}.image-preview__wrap[_ngcontent-%COMP%]{width:141px}.image-preview__mark[_ngcontent-%COMP%]{max-width:47px;height:42px}.image-preview__mark[_ngcontent-%COMP%]:before{opacity:1}.image-preview__mark[_ngcontent-%COMP%]:hover:before{opacity:0}.image-preview_envelope[_ngcontent-%COMP%]   .image-preview__wrap[_ngcontent-%COMP%], .image-preview_postcard[_ngcontent-%COMP%]   .image-preview__wrap[_ngcontent-%COMP%]{border-width:10px}.image-preview_postcard[_ngcontent-%COMP%], .image-preview_envelope[_ngcontent-%COMP%]{max-width:280px}.image-preview_envelope[_ngcontent-%COMP%]   .image-preview__wrap[_ngcontent-%COMP%]:before, .image-preview_envelope[_ngcontent-%COMP%]   .image-preview__wrap[_ngcontent-%COMP%]:after{border-top:1px solid var(--border-color);border-bottom:1px solid var(--border-color);height:13px}.image-preview_envelope[_ngcontent-%COMP%]   .image-preview__wrap[_ngcontent-%COMP%]:after{bottom:45px}.image-preview__add-stamp[_ngcontent-%COMP%]{top:41%;left:73%}.image-preview__add-stamp[_ngcontent-%COMP%]:before, .image-preview__add-stamp[_ngcontent-%COMP%]:after{transition:transform .3s ease}.image-preview__add-stamp[_ngcontent-%COMP%]:hover:before{transform:scale(1.1)}.image-preview__add-stamp[_ngcontent-%COMP%]:hover:after{transform:scale(1.1) rotate(90deg)}.image-preview__stamps-9[_ngcontent-%COMP%]   .image-preview__mark[_ngcontent-%COMP%]{height:50px}.image-preview__stamps-9[_ngcontent-%COMP%]   .image-preview__add-stamp[_ngcontent-%COMP%]{left:78%}.image-preview__stamps-28[_ngcontent-%COMP%]   .image-preview__mark[_ngcontent-%COMP%]:hover:before{opacity:1}}']}),r})(),y=(()=>{class r{constructor(e){this._storeService=e,this.fileBtnText="",this.imageData=new t.vpe,this.scrollToCropper=new t.vpe,this.fileBtnConfig={type:"",imageNumber:[]},this.constructorConfig={type:"",costPerPage:0,costPerItem:"",stamp:{resolution:{width:0,height:0},size:{width:"",height:""}},background:{resolution:{width:0,height:0},size:{width:"",height:""}}}}getImageProperties(){return"stamps-6"===this.constructorConfig.type||"stamps-9"===this.constructorConfig.type||"stamps-28"===this.constructorConfig.type||"stamps-28-difference"===this.constructorConfig.type?{resolution:{width:this.constructorConfig.stamp.resolution.width,height:this.constructorConfig.stamp.resolution.height},size:{width:this.constructorConfig.stamp.size.width,height:this.constructorConfig.stamp.size.height}}:{resolution:{width:this.constructorConfig.background.resolution.width,height:this.constructorConfig.background.resolution.height},size:{width:this.constructorConfig.background.size.width,height:this.constructorConfig.background.size.height}}}fileChangeEvent(e){const i=e.target.files[0],o=this,n=new FileReader;n.readAsDataURL(i),n.onload=()=>{const p=o.getImageProperties();o.imageData.emit({fileName:i.name,image:{resolution:{width:p.resolution.width,height:p.resolution.height},size:{width:p.size.width,height:p.size.height}},imageSrc:n.result,imagesToFill:{type:o.fileBtnConfig.type,imageNumber:o.fileBtnConfig.imageNumber.concat()}}),o.scrollToCropper.emit(),o._storeService.currentSelect.next("background")},n.onerror=p=>{console.log("Error: ",p)}}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(h.d))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-file-btn"]],inputs:{fileBtnText:"fileBtnText",fileBtnConfig:"fileBtnConfig",constructorConfig:"constructorConfig"},outputs:{imageData:"imageData",scrollToCropper:"scrollToCropper"},decls:4,vars:1,consts:[[1,"file-btn"],[1,"file-btn__txt"],["type","file",1,"file-btn__input",3,"change"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"label",1)(2,"input",2),t.NdJ("change",function(n){return i.fileChangeEvent(n)}),t.qZA(),t._uU(3),t.qZA()()),2&e&&(t.xp6(3),t.hij(" ",i.fileBtnText," "))},styles:['.file-btn[_ngcontent-%COMP%]{position:relative;padding-left:25px;margin-bottom:15px}.file-btn__input[_ngcontent-%COMP%]{opacity:0;visibility:hidden;position:absolute}.file-btn__txt[_ngcontent-%COMP%]{color:var(--font-color-4);font-family:Rubik,sans-serif;font-size:14px;font-weight:500;line-height:1.7}.file-btn__txt[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0;content:"";background:url(/assets/img/file-input.svg);width:11px;height:20px}@media screen and (min-width: 1024px){.file-btn[_ngcontent-%COMP%]{margin-bottom:8px}.file-btn__txt[_ngcontent-%COMP%]{border-bottom:1px solid transparent;transition:border-bottom .3s ease}.file-btn__txt[_ngcontent-%COMP%]:hover{border-bottom:1px solid currentColor}}']}),r})();function k(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"span",2)(1,"span",3),t.NdJ("click",function(){const n=t.CHM(e).$implicit;return t.oxw().deleteFile(n.index)}),t.qZA(),t.TgZ(2,"span",4),t._uU(3),t.qZA()()}if(2&r){const e=s.$implicit;t.xp6(3),t.Oqu(e.name)}}let F=(()=>{class r{constructor(){this.onDeleteFile=new t.vpe}ngOnInit(){}deleteFile(e){this.onDeleteFile.emit(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-uploaded-pic"]],inputs:{files:"files"},outputs:{onDeleteFile:"onDeleteFile"},decls:2,vars:1,consts:[[1,"uploaded-pic"],["class","uploaded-pic__item",4,"ngFor","ngForOf"],[1,"uploaded-pic__item"],[1,"uploaded-pic__del",3,"click"],[1,"uploaded-pic__txt"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,k,4,1,"span",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",i.files))},directives:[m.sg],styles:[".uploaded-pic__item[_ngcontent-%COMP%]{position:relative;display:inline-block;vertical-align:top;margin:0 10px 15px 0;padding-left:25px;-webkit-user-select:none;user-select:none}.uploaded-pic__item[_ngcontent-%COMP%]:last-child{margin-right:0}.uploaded-pic__del[_ngcontent-%COMP%]{position:absolute;top:0;left:0;background:url(/assets/img/delete-2.svg) no-repeat center;width:15px;height:20px;cursor:pointer}.uploaded-pic__txt[_ngcontent-%COMP%]{font-size:14px;font-family:Rubik,sans-serif;font-weight:500;line-height:1.7;color:var(--font-color-1)}@media screen and (min-width: 1024px){.uploaded-pic__item[_ngcontent-%COMP%]{margin:0 10px 8px 0}.uploaded-pic__del[_ngcontent-%COMP%]{opacity:.5;transition:opacity .3s ease}.uploaded-pic__del[_ngcontent-%COMP%]:hover{opacity:1}}"]}),r})();var I=_(4106),Z=_(7531),B=_(3319);const z=["horizontalInput"],D=["verticalInput"];let A=(()=>{class r{constructor(){this.changeRatio=new t.vpe}changeRotation(){this.changeRatio.emit({resolution:{width:this.imageProperties.resolution.height,height:this.imageProperties.resolution.width},size:{width:this.imageProperties.size.height,height:this.imageProperties.size.width}})}getRatio(){this._ratio=this.imageProperties.resolution.width/this.imageProperties.resolution.height}ngOnInit(){}ngAfterViewInit(){this.getRatio(),this.setActiveInput()}onChange(e){e.preventDefault(),e.stopPropagation(),"horizontal"===e.target.value&&this._ratio<1&&this.changeRotation(),"vertical"===e.target.value&&this._ratio>=1&&this.changeRotation()}setActiveInput(){this._ratio<1?this._verticalInput.nativeElement.checked=!0:this._horizontalInput.nativeElement.checked=!0}updateData(e){this.imageProperties={resolution:{width:e.resolution.width,height:e.resolution.height},size:{width:e.size.width,height:e.size.height}},this.getRatio()}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-format-wrap"]],viewQuery:function(e,i){if(1&e&&(t.Gf(z,5),t.Gf(D,5)),2&e){let o;t.iGM(o=t.CRH())&&(i._horizontalInput=o.first),t.iGM(o=t.CRH())&&(i._verticalInput=o.first)}},inputs:{imageProperties:"imageProperties"},outputs:{changeRatio:"changeRatio"},decls:26,vars:0,consts:[[1,"format-wrap"],[1,"format-wrap__cover"],[1,"site__row"],[1,"col-xs-12","col-sm-6","format-wrap__txt"],[1,"col-xs-12","col-sm-6"],[1,"format-wrap__choice"],[1,"format-wrap__choice-item"],[1,"format-radio"],[1,"format-radio__label"],["type","radio","name","format","value","horizontal",3,"change"],["horizontalInput",""],[1,"format-radio__txt"],[1,"format-radio__pic"],["src","/assets/img/postcard.jpg","alt",""],[1,"format-radio","format-radio_vertical"],["type","radio","name","format","value","vertical",3,"change"],["verticalInput",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p"),t._uU(5,"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0444\u043e\u0440\u043c\u0430\u0442 \u043b\u0438\u0441\u0442\u0456\u0432\u043a\u0438:"),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"label",8)(11,"input",9,10),t.NdJ("change",function(n){return i.onChange(n)}),t.qZA(),t.TgZ(13,"span",11),t._uU(14,"\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u0438\u0439"),t.qZA(),t.TgZ(15,"span",12),t._UZ(16,"img",13),t.qZA()()()(),t.TgZ(17,"div",6)(18,"div",14)(19,"label",8)(20,"input",15,16),t.NdJ("change",function(n){return i.onChange(n)}),t.qZA(),t.TgZ(22,"span",11),t._uU(23,"\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u0438\u0439"),t.qZA(),t.TgZ(24,"span",12),t._UZ(25,"img",13),t.qZA()()()()()()()()())},styles:['.format-wrap[_ngcontent-%COMP%]{padding:20px 0 0;border-top:1px solid var(--border-color)}.format-wrap__cover[_ngcontent-%COMP%]{max-width:320px}.format-wrap__txt[_ngcontent-%COMP%]{margin-bottom:30px;color:var(--font-color-2);font-size:14px;line-height:1.2}.format-wrap__txt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:inherit;font-size:inherit;line-height:inherit}.format-wrap__txt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.format-wrap__choice-item[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;margin:0 15px 20px 0}.format-wrap__choice-item[_ngcontent-%COMP%]:last-child{margin-right:0}.format-radio__label[_ngcontent-%COMP%]{display:block;line-height:1}.format-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none;position:absolute;z-index:-1;opacity:0;clip:rect(0,0,0,0)}.format-radio__txt[_ngcontent-%COMP%]{display:inline-block;position:relative;padding-left:20px;margin-bottom:15px;color:var(--font-color-2);font-size:12px}.format-radio__txt[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-1px;left:0;width:12px;height:12px;border:1px solid var(--border-color);border-radius:50%;transition:border .3s ease;box-sizing:border-box}.format-radio__txt[_ngcontent-%COMP%]:after{content:"";position:absolute;top:2px;left:3px;width:6px;height:6px;background:var(--font-color-4);border-radius:50%;opacity:0;transition:opacity .3s ease;box-sizing:border-box}.format-radio__pic[_ngcontent-%COMP%]{display:block;position:relative;border:4px solid #fff;box-shadow:var(--box-shadow-2);margin-left:20px;width:114px}.format-radio__pic[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-4px;right:-4px;bottom:-4px;left:-4px;background:rgba(14,47,75,.4);opacity:1;transition:opacity .3s ease}.format-radio__pic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block;width:100%;height:72px;object-fit:cover}.format-radio_vertical[_ngcontent-%COMP%]   .format-radio__pic[_ngcontent-%COMP%]{width:80px}.format-radio_vertical[_ngcontent-%COMP%]   .format-radio__pic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:106px}.format-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .format-radio__txt[_ngcontent-%COMP%]:before{border-color:var(--font-color-4)}.format-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .format-radio__txt[_ngcontent-%COMP%]:after{opacity:1}.format-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .format-radio__pic[_ngcontent-%COMP%]:before{opacity:0}@media screen and (min-width: 768px){.format-wrap__cover[_ngcontent-%COMP%]{max-width:none}.format-wrap__choice[_ngcontent-%COMP%]{text-align:right}}@media screen and (min-width: 1024px){.format-wrap[_ngcontent-%COMP%]{padding:40px 0 20px}.format-wrap__txt[_ngcontent-%COMP%]{font-size:17px;margin-bottom:118px}.format-radio__label[_ngcontent-%COMP%]{text-align:left}.format-radio__txt[_ngcontent-%COMP%]{font-size:16px;padding-left:30px}.format-radio__txt[_ngcontent-%COMP%]:before{top:-3px;width:20px;height:20px;border-width:2px}.format-radio__txt[_ngcontent-%COMP%]:after{top:2px;left:5px;width:10px;height:10px}.format-radio__pic[_ngcontent-%COMP%]{width:240px;border-width:8px;margin-left:0}.format-radio__pic[_ngcontent-%COMP%]:before{top:-8px;right:-8px;bottom:-8px;left:-8px}.format-radio__pic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:150px}.format-radio_vertical[_ngcontent-%COMP%]   .format-radio__pic[_ngcontent-%COMP%]{width:166px}.format-radio_vertical[_ngcontent-%COMP%]   .format-radio__pic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:224px}}']}),r})();var T=_(821);const E=["dummyPic"],R=["canvasWrap"],H=["viewWrap"];function N(r,s){if(1&r&&t._UZ(0,"img",30),2&r){const e=t.oxw();t.s9C("src",e.resultImage,t.LSH)}}let J=(()=>{class r{constructor(e){this._storeService=e,this.cancelEdit=new t.vpe,this.hideEdit=new t.vpe,this.isMoving=!1,this.sideHeight="0px",this._sourcePicWidth=0,this._sourcePicHeight=0,this._wrapperWidth=0,this._wrapperHeight=0,this._ratioDOMtoCSS=1,this._finalImageWidth=0,this._finalImageHeight=0,this._proportionsRatio=1,this._ratioWidthImgToCtx=1,this._ratioHeightImgToCtx=1,this._scaleStep=0,this._translateStep=0,this._delayEditButton=500,this._overScaleFactor=6,this._degree=90,this._startMousePosition={x:0,y:0},this._startContextPosition={x:0,y:0,scale:1,rotate:0},this._bufferContextPosition={x:0,y:0,scale:1,rotate:0},this._startTime=0,this._minScale=1,this._maxScale=1}canScale(e){return e>=this._minScale&&e<=this._maxScale}drawImage(e){let i=e.x/e.scale,o=e.y/e.scale;switch(e.rotate){case 0:break;case 90:i=e.x/e.scale+this._canvas.height*this._ratioHeightImgToCtx*e.scale;break;case 180:i=e.x/e.scale+this._canvas.width*this._ratioWidthImgToCtx*e.scale,o=e.y/e.scale+this._canvas.height*this._ratioHeightImgToCtx*e.scale;break;case 270:o=e.y/e.scale+this._canvas.width*this._ratioWidthImgToCtx*e.scale;break;default:console.error("obj.rotate "+e.rotate+"doesn't match the required values")}this._ctx.translate(i,o),this._ctx.scale(e.scale,e.scale),this._ctx.rotate(e.rotate*Math.PI/180),this._proportionsRatio<1?this._ctx.drawImage(this._image,0,0,this._sourcePicWidth,this._sourcePicHeight,0,0,this._canvas.width,this._canvas.width*this._aspectRatioOriginal):this._ctx.drawImage(this._image,0,0,this._sourcePicWidth,this._sourcePicHeight,0,0,this._canvas.height/this._aspectRatioOriginal,this._canvas.height)}getMinPositionX(e){const i=this._ratioDOMtoCSS*e,o=+this._canvas.style.width.split("px")[0]*i;return 90===this._startContextPosition.rotate||270===this._startContextPosition.rotate?-(this._canvas.height*this._ratioHeightImgToCtx*e*e-o):-(this._canvas.width*this._ratioWidthImgToCtx*e*e-o)}getMinPositionY(e){const i=this._ratioDOMtoCSS*e,o=+this._canvas.style.height.split("px")[0]*i;return 90===this._startContextPosition.rotate||270===this._startContextPosition.rotate?-(this._canvas.width*this._ratioWidthImgToCtx*e*e-o):-(this._canvas.height*this._ratioHeightImgToCtx*e*e-o)}getProportionsRatio(){this._proportionsRatio=+(this._aspectRatioOriginal/this._aspectRatioFinal).toFixed(10),this._ratioWidthImgToCtx=this._proportionsRatio<1?1:+(this._canvas.height/this._aspectRatioOriginal/this._canvas.width).toFixed(10),this._ratioHeightImgToCtx=this._proportionsRatio<1?+(this._canvas.width*this._aspectRatioOriginal/this._canvas.height).toFixed(10):1}getPositionX(e,i){let o=this.getMinPositionX(i);return e>0&&(e=0),e<o&&(e=o),e}getPositionY(e,i){let o=this.getMinPositionY(i);return e>0&&(e=0),e<o&&(e=o),e}getRatioDOMtoCSS(){this._ratioDOMtoCSS=+(this._canvas.width/+this._canvas.style.width.split("px")[0]).toFixed(10)}initCanvas(){this._ctx=this._canvas.getContext("2d"),this._image=new Image;let e=this;this._image.onload=function(){e.resetValues(),e._ctx.save(),e.drawImage({x:0,y:0,scale:e._minScale,rotate:0}),e._ctx.restore(),e.setStartContextPosition()},this._image.src=this.cropperConfig.imageSrc}loopedScaling(e){const o=Math.round(e);0===this._startTime&&(this._startTime=o);const n=o-this._startTime;if(this._scaleRAF=requestAnimationFrame(this.loopedScaling.bind(this)),n>this._delayEditButton){let p=this._scaleStep*(n-this._delayEditButton)/100;p=this.roundDecimals(p,10),this.scaleContext(p)}}loopedTranslate(e){const o=Math.round(e);0===this._startTime&&(this._startTime=o);const n=o-this._startTime;if(this._translateRAF=requestAnimationFrame(this.loopedTranslate.bind(this)),n>this._delayEditButton){const p=this._translateStep*(n-this._delayEditButton)/10;"vertical"===this._translateDirection?this.translateImage({y:p}):"horizontal"===this._translateDirection&&this.translateImage({x:p})}}ngOnInit(){this.storeServiceOrderSubscribe(),this._canvas=document.getElementById("canvas"),this.initCanvas()}ngOnDestroy(){this._orderSubscriber.unsubscribe()}onCancelEdit(){this.cancelEdit.emit()}onContinue(){this.resultImage=this._canvas.toDataURL(),this._storeService.addImageToOrder({fileIndex:this.cropperConfig.fileIndex,imageSrc:this.resultImage,imagesToFill:{type:this.cropperConfig.imagesToFill.type,imageNumber:this.cropperConfig.imagesToFill.imageNumber.concat()}}),this.hideEdit.emit()}onMousedown(e){this.isMoving=!0,this._startMousePosition.x=e.clientX,this._startMousePosition.y=e.clientY}onTouchstart(e){this.isMoving=!0,this._startMousePosition.x=e.touches[0].clientX,this._startMousePosition.y=e.touches[0].clientY}onMouseup(e){this.setStartContextPosition(),this.resetStartMousePosition(),this.isMoving=!1}onMouseenter(e){}onMousemove(e){this.isMoving&&this.translateImage({x:e.clientX,y:e.clientY})}onTouchmove(e){this.isMoving&&this.translateImage({x:e.touches[0].clientX,y:e.touches[0].clientY})}onMouseout(e){this.setStartContextPosition(),this.resetStartMousePosition(),this.isMoving=!1}onScaleButtonMousedown(e,i){e.preventDefault(),e.stopPropagation(),this._scaleStep=i;const o=this.roundDecimals(this._startContextPosition.scale+i,10);this.canScale(o)&&(this.reDrawImage({x:this.getPositionX(this._startContextPosition.x,o),y:this.getPositionY(this._startContextPosition.y,o),scale:o,rotate:this._startContextPosition.rotate}),this.setStartContextPosition(),this.loopedScaling(this._startTime))}onScaleButtonMouseup(e){e.preventDefault(),e.stopPropagation(),cancelAnimationFrame(this._scaleRAF),this._startTime=0}onScaleButtonMouseout(){this.setStartContextPosition(),cancelAnimationFrame(this._scaleRAF)}onEditButtonClick(e){e.preventDefault(),e.stopPropagation()}onResize(){this.setCanvasCSSSize(),this.getRatioDOMtoCSS(),this.setSideHeight()}onTranslateMousedown(e,i){e.preventDefault(),e.stopPropagation(),this._translateDirection=i.direction,this._translateStep=i.value,this.isMoving=!0,"vertical"===this._translateDirection?this.translateImage({y:i.value}):"horizontal"===this._translateDirection&&this.translateImage({x:i.value}),this.loopedTranslate(this._startTime)}onTranslateMouseup(e){this.setStartContextPosition(),cancelAnimationFrame(this._translateRAF),this.isMoving=!1,this._startTime=0,this._translateDirection=""}onTranslateMouseleave(){this.setStartContextPosition(),this.isMoving=!1,this._translateDirection=""}onRotateClick(e,i){e.preventDefault(),e.stopPropagation();let o=i*this._degree+this._startContextPosition.rotate;o%=360,o=o<0?360+o:o,this.setMinMaxScale(o),this.reDrawImage({x:0,y:0,scale:this._minScale,rotate:o}),this.setStartContextPosition()}reDrawImage(e){e.scale<this._minScale&&(e.scale=this._minScale),e.scale>this._maxScale&&(e.scale=this._maxScale),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._ctx.save(),this.setBufferPosition(e),this.drawImage({x:e.x,y:e.y,scale:e.scale,rotate:e.rotate}),this._ctx.restore()}resetStartMousePosition(){this._startMousePosition.x=0,this._startMousePosition.y=0}resetValues(){this.setInitialValues(),this.setCanvasCSSSize(),this.setCanvasDOMSize(),this.getRatioDOMtoCSS(),this.getProportionsRatio(),this.setSideHeight(),this.setMinMaxScale(0),this.setBufferPosition({x:0,y:0,scale:this._minScale,rotate:0})}roundDecimals(e,i){const o=i?Math.pow(10,i):1;return Math.round(e*o)/o}roundDownDecimals(e,i){const o=i?Math.pow(10,i):1;return Math.floor(e*o)/o}roundUpDecimals(e,i){const o=i?Math.pow(10,i):1;return Math.ceil(e*o)/o}scaleContext(e){let i=this._startContextPosition.scale+e;i=this.roundDecimals(i,10),this.canScale(i)&&(this.reDrawImage({x:this.getPositionX(this._startContextPosition.x,i),y:this.getPositionY(this._startContextPosition.y,i),scale:i,rotate:this._startContextPosition.rotate}),this.setStartContextPosition())}setBufferPosition(e){this._bufferContextPosition.x=e.x,this._bufferContextPosition.y=e.y,this._bufferContextPosition.scale=e.scale,this._bufferContextPosition.rotate=e.rotate}setCanvasCSSSize(){this._wrapperWidth=this._canvasWrap.nativeElement.offsetWidth,this._wrapperHeight=this.roundDecimals(this._wrapperWidth*this._aspectRatioFinal,6),this._canvas.style.width=this._wrapperWidth+"px",this._canvas.style.height=this._wrapperHeight+"px"}setCanvasDOMSize(){this._canvas.width=this._finalImageWidth,this._canvas.height=this._finalImageHeight}setInitialValues(){this._sourcePicWidth=this._dummyPic.nativeElement.width,this._sourcePicHeight=this._dummyPic.nativeElement.height,this._aspectRatioOriginal=this._sourcePicHeight/this._sourcePicWidth,this._finalImageWidth=this.cropperConfig.image.resolution.width,this._finalImageHeight=this.cropperConfig.image.resolution.height,this._aspectRatioFinal=this._finalImageHeight/this._finalImageWidth}setMinMaxScale(e){if(90===e||270===e){let n,o=+(1/this._aspectRatioOriginal/this._aspectRatioFinal).toFixed(10);o<1?(n=this._proportionsRatio<1?this._aspectRatioOriginal:this._aspectRatioFinal,this._minScale=this.roundUpDecimals(1/o/n,10),this._maxScale=this.roundDownDecimals(this._minScale*this._sourcePicWidth/this._finalImageHeight*this._overScaleFactor,10)):(n=this._proportionsRatio<1?this._aspectRatioFinal:this._aspectRatioOriginal,this._minScale=this.roundUpDecimals(o*n,10),this._maxScale=this.roundDownDecimals(this._minScale*this._sourcePicWidth/this._finalImageHeight*this._overScaleFactor,10))}else this._proportionsRatio<1?(this._minScale=this.roundUpDecimals(1/this._proportionsRatio,10),this._maxScale=this.roundDownDecimals(this._minScale*this._sourcePicHeight/this._finalImageHeight*this._overScaleFactor,10)):(this._minScale=this.roundUpDecimals(this._proportionsRatio,10),this._maxScale=this.roundDownDecimals(this._minScale*this._sourcePicHeight/this._finalImageHeight*this._overScaleFactor,10));this._maxScale<this._minScale&&(this._maxScale=this._minScale)}setSideHeight(){var e;this.sideHeight=(null===(e=this.viewWrap)||void 0===e?void 0:e.nativeElement.offsetHeight)+"px"}setStartContextPosition(){this._startContextPosition.x=this._bufferContextPosition.x,this._startContextPosition.y=this._bufferContextPosition.y,this._startContextPosition.scale=this._bufferContextPosition.scale,this._startContextPosition.rotate=this._bufferContextPosition.rotate}storeServiceOrderSubscribe(){this._orderSubscriber=this._storeService.order.subscribe(e=>{this._storeServiceOrder=e})}translateImage(e){const i=this._ratioDOMtoCSS*this._startContextPosition.scale;"number"!=typeof e.x&&(e.x=this._startMousePosition.x),"number"!=typeof e.y&&(e.y=this._startMousePosition.y);let n=(e.y-this._startMousePosition.y)*i+this._startContextPosition.y;this.reDrawImage({x:this.getPositionX((e.x-this._startMousePosition.x)*i+this._startContextPosition.x,this._startContextPosition.scale),y:this.getPositionY(n,this._startContextPosition.scale),scale:this._startContextPosition.scale,rotate:this._startContextPosition.rotate})}updateData(){setTimeout(()=>{this.resetValues(),this._ctx.save(),this.drawImage({x:0,y:0,scale:this._minScale,rotate:0}),this._ctx.restore(),this.setStartContextPosition()})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(h.d))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-cropper-pic"]],viewQuery:function(e,i){if(1&e&&(t.Gf(E,5),t.Gf(R,5),t.Gf(H,5)),2&e){let o;t.iGM(o=t.CRH())&&(i._dummyPic=o.first),t.iGM(o=t.CRH())&&(i._canvasWrap=o.first),t.iGM(o=t.CRH())&&(i.viewWrap=o.first)}},hostBindings:function(e,i){1&e&&t.NdJ("resize",function(){return i.onResize()},!1,t.Jf7)},inputs:{cropperConfig:"cropperConfig"},outputs:{cancelEdit:"cancelEdit",hideEdit:"hideEdit"},decls:45,vars:23,consts:[[1,"cropper-pic"],[1,"site__row"],["alt","",3,"src",4,"ngIf"],[1,"col-xs-12","col-sm-8","cropper-pic__txt",3,"innerHTML"],[1,"col-xs-12","cropper-pic__wrap"],[1,"cropper-pic__view"],[1,"cropper-view"],[1,"cropper-view__size","cropper-view__size_1"],[1,"cropper-view__size","cropper-view__size_2"],[1,"cropper-view__wrap"],["viewWrap",""],["alt","",1,"cropper-view__pic",3,"src"],["dummyPic",""],[1,"cropper-view__canvas-wrap"],["canvasWrap",""],["id","canvas",1,"cropper-view__canvas",3,"touchstart","touchend","touchmove","mousedown","mouseup","mouseenter","mousemove","mouseout"],[1,"cropper-pic__buttons"],[1,"cropper-pic__title"],["type","button",1,"cropper-pic__btn","cropper-pic__btn_plus",3,"click","touchstart","touchend","mousedown","mouseleave","mouseup"],["type","button",1,"cropper-pic__btn","cropper-pic__btn_minus",3,"click","touchstart","touchend","mousedown","mouseleave","mouseup"],["type","button",1,"cropper-pic__btn","cropper-pic__btn_rotate-1",3,"click"],["type","button",1,"cropper-pic__btn","cropper-pic__btn_rotate-2",3,"click"],[1,"cropper-pic__separate"],[1,"cropper-pic__row"],["type","button",1,"cropper-pic__btn","cropper-pic__btn_up",3,"touchstart","touchend","mousedown","mouseup","mouseleave","click"],["type","button",1,"cropper-pic__btn","cropper-pic__btn_left",3,"touchstart","touchend","mousedown","mouseup","mouseleave","click"],["type","button",1,"cropper-pic__btn","cropper-pic__btn_down",3,"touchstart","touchend","mousedown","mouseup","mouseleave","click"],["type","button",1,"cropper-pic__btn","cropper-pic__btn_right",3,"touchstart","touchend","mousedown","mouseup","mouseleave","click"],[1,"col-xs-12","col-sm-4","cropper-pic__controls"],[1,"link","link_delete",3,"click"],["alt","",3,"src"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,N,1,1,"img",2),t._UZ(3,"div",3),t.ALo(4,"translate"),t.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"span"),t._uU(10),t.qZA()(),t.TgZ(11,"div",8)(12,"span"),t._uU(13),t.qZA()(),t.TgZ(14,"div",9,10),t._UZ(16,"img",11,12),t.TgZ(18,"div",13,14)(20,"canvas",15),t.NdJ("touchstart",function(n){return i.onTouchstart(n)})("touchend",function(n){return i.onMouseup(n)})("touchmove",function(n){return i.onTouchmove(n)})("mousedown",function(n){return i.onMousedown(n)})("mouseup",function(n){return i.onMouseup(n)})("mouseenter",function(n){return i.onMouseenter(n)})("mousemove",function(n){return i.onMousemove(n)})("mouseout",function(n){return i.onMouseout(n)}),t.qZA()()()()(),t.TgZ(21,"div",16)(22,"div",17),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"button",18),t.NdJ("click",function(n){return i.onEditButtonClick(n)})("touchstart",function(n){return i.onScaleButtonMousedown(n,.005)})("touchend",function(n){return i.onScaleButtonMouseup(n)})("mousedown",function(n){return i.onScaleButtonMousedown(n,.005)})("mouseleave",function(){return i.onScaleButtonMouseout()})("mouseup",function(n){return i.onScaleButtonMouseup(n)}),t.qZA(),t.TgZ(26,"button",19),t.NdJ("click",function(n){return i.onEditButtonClick(n)})("touchstart",function(n){return i.onScaleButtonMousedown(n,-.005)})("touchend",function(n){return i.onScaleButtonMouseup(n)})("mousedown",function(n){return i.onScaleButtonMousedown(n,-.005)})("mouseleave",function(){return i.onScaleButtonMouseout()})("mouseup",function(n){return i.onScaleButtonMouseup(n)}),t.qZA(),t.TgZ(27,"div",17),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"button",20),t.NdJ("click",function(n){return i.onRotateClick(n,1)}),t.qZA(),t.TgZ(31,"button",21),t.NdJ("click",function(n){return i.onRotateClick(n,-1)}),t.qZA(),t.TgZ(32,"div",17),t._uU(33),t.ALo(34,"translate"),t.qZA(),t._UZ(35,"div",22),t.TgZ(36,"div",23)(37,"button",24),t.NdJ("touchstart",function(n){return i.onTranslateMousedown(n,{direction:"vertical",value:-.5})})("touchend",function(n){return i.onTranslateMouseup(n)})("mousedown",function(n){return i.onTranslateMousedown(n,{direction:"vertical",value:-.5})})("mouseup",function(n){return i.onTranslateMouseup(n)})("mouseleave",function(){return i.onTranslateMouseleave()})("click",function(n){return i.onEditButtonClick(n)}),t.qZA()(),t.TgZ(38,"button",25),t.NdJ("touchstart",function(n){return i.onTranslateMousedown(n,{direction:"horizontal",value:-.5})})("touchend",function(n){return i.onTranslateMouseup(n)})("mousedown",function(n){return i.onTranslateMousedown(n,{direction:"horizontal",value:-.5})})("mouseup",function(n){return i.onTranslateMouseup(n)})("mouseleave",function(){return i.onTranslateMouseleave()})("click",function(n){return i.onEditButtonClick(n)}),t.qZA(),t.TgZ(39,"button",26),t.NdJ("touchstart",function(n){return i.onTranslateMousedown(n,{direction:"vertical",value:.5})})("touchend",function(n){return i.onTranslateMouseup(n)})("mousedown",function(n){return i.onTranslateMousedown(n,{direction:"vertical",value:.5})})("mouseup",function(n){return i.onTranslateMouseup(n)})("mouseleave",function(){return i.onTranslateMouseleave()})("click",function(n){return i.onEditButtonClick(n)}),t.qZA(),t.TgZ(40,"button",27),t.NdJ("touchstart",function(n){return i.onTranslateMousedown(n,{direction:"horizontal",value:.5})})("touchend",function(n){return i.onTranslateMouseup(n)})("mousedown",function(n){return i.onTranslateMousedown(n,{direction:"horizontal",value:.5})})("mouseup",function(n){return i.onTranslateMouseup(n)})("mouseleave",function(){return i.onTranslateMouseleave()})("click",function(n){return i.onEditButtonClick(n)}),t.qZA()()(),t.TgZ(41,"div",28)(42,"button",29),t.NdJ("click",function(){return i.onCancelEdit()}),t._uU(43),t.ALo(44,"translate"),t.qZA()()()()),2&e&&(t.xp6(2),t.Q6J("ngIf",i.resultImage),t.xp6(1),t.Q6J("innerHTML",t.lcZ(4,13,"cropperPic.advice"),t.oJD),t.xp6(5),t.Udp("width",i.sideHeight),t.xp6(2),t.Oqu(i.cropperConfig.image.size.height),t.xp6(3),t.Oqu(i.cropperConfig.image.size.width),t.xp6(3),t.s9C("src",i.cropperConfig.imageSrc,t.LSH),t.xp6(4),t.ekj("isMoving",i.isMoving),t.xp6(3),t.Oqu(t.lcZ(24,15,"cropperPic.changeSize")),t.xp6(5),t.Oqu(t.lcZ(29,17,"cropperPic.rotation")),t.xp6(5),t.Oqu(t.lcZ(34,19,"cropperPic.move")),t.xp6(10),t.Oqu(t.lcZ(44,21,"button.remove")))},directives:[m.O5],pipes:[T.X$],styles:['.cropper-pic[_ngcontent-%COMP%]{padding:20px 0;border-top:1px solid var(--border-color)}.cropper-pic__txt[_ngcontent-%COMP%]{margin-bottom:30px;color:var(--font-color-2);font-size:14px;line-height:1.2}.cropper-pic__txt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:inherit;font-size:inherit;line-height:inherit}.cropper-pic__wrap[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-bottom:15px;-webkit-user-select:none;user-select:none}.cropper-pic__view[_ngcontent-%COMP%]{text-align:center;order:1;margin-bottom:30px;width:100%}.cropper-pic__buttons[_ngcontent-%COMP%]{position:relative;margin:0 auto;order:1;-webkit-user-select:none;user-select:none}.cropper-pic__title[_ngcontent-%COMP%]{display:none;font-size:14px;-webkit-user-select:none;user-select:none}.cropper-pic__btn[_ngcontent-%COMP%]{position:relative;width:38px;height:38px;border-radius:7px;border:1px solid var(--border-color);background:#fff;box-shadow:0 0 10px #0000001a;margin:0 2px 8px;padding:0!important;outline:none!important;-webkit-user-select:none;user-select:none;cursor:pointer}.cropper-pic__btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:16px;height:16px}.cropper-pic__btn[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;top:50%;left:50%;width:16px;height:16px;background-size:contain;background-position:center;background-repeat:no-repeat;-webkit-user-select:none;user-select:none;transform:translate(-50%,-50%)}.cropper-pic__btn_plus[_ngcontent-%COMP%]:before{background-image:url(/assets/img/cropper/plus.svg)}.cropper-pic__btn_minus[_ngcontent-%COMP%]:before{background-image:url(/assets/img/cropper/minus.svg)}.cropper-pic__btn_rotate-1[_ngcontent-%COMP%]:before{background-image:url(/assets/img/cropper/rotate-1.svg)}.cropper-pic__btn_rotate-2[_ngcontent-%COMP%]:before{background-image:url(/assets/img/cropper/rotate-2.svg)}.cropper-pic__btn_up[_ngcontent-%COMP%]:before{background-image:url(/assets/img/cropper/up.svg)}.cropper-pic__btn_left[_ngcontent-%COMP%]:before{background-image:url(/assets/img/cropper/left.svg)}.cropper-pic__btn_down[_ngcontent-%COMP%]:before{background-image:url(/assets/img/cropper/down.svg)}.cropper-pic__btn_right[_ngcontent-%COMP%]:before{background-image:url(/assets/img/cropper/right.svg)}.cropper-pic__row[_ngcontent-%COMP%]{display:inline;-webkit-user-select:none;user-select:none}.cropper-pic__separate[_ngcontent-%COMP%]{display:block}.cropper-pic__view_postcard[_ngcontent-%COMP%]   .cropper-view__wrap[_ngcontent-%COMP%]{padding:0;border:8px solid #fff;box-shadow:var(--box-shadow-2);max-width:455px}.cropper-pic__view_postcard[_ngcontent-%COMP%]   .cropper-view__wrap[_ngcontent-%COMP%]:before, .cropper-pic__view_postcard[_ngcontent-%COMP%]   .cropper-view__wrap[_ngcontent-%COMP%]:after{display:none}.cropper-pic__view_envelop[_ngcontent-%COMP%]   .cropper-view__wrap[_ngcontent-%COMP%]{padding:0;box-shadow:var(--box-shadow-2)}.cropper-pic__view_envelop[_ngcontent-%COMP%]   .cropper-view__wrap[_ngcontent-%COMP%]:before, .cropper-pic__view_envelop[_ngcontent-%COMP%]   .cropper-view__wrap[_ngcontent-%COMP%]:after{display:none}.cropper-pic__view_envelop[_ngcontent-%COMP%]   .cropper-view__size_2[_ngcontent-%COMP%]{left:30px;right:0}.cropper-view[_ngcontent-%COMP%]{position:relative;display:inline-block;max-width:100%;padding:0 0 30px 30px}.cropper-view__size[_ngcontent-%COMP%]{display:block;position:absolute;color:var(--font-color-1);text-align:center;border-left:2px solid var(--border-color-2);border-right:2px solid var(--border-color-2)}.cropper-view__size[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;right:0;left:0;height:2px;margin-top:-1px;background-image:repeating-linear-gradient(90deg,var(--border-color-2) 0,var(--border-color-2) 7px,transparent 7px,transparent 14px)}.cropper-view__size[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;position:relative;top:11px;-webkit-user-select:none;user-select:none}.cropper-view__size_1[_ngcontent-%COMP%]{top:0;left:23px;transform:rotate(90deg);transform-origin:0 0}.cropper-view__size_2[_ngcontent-%COMP%]{bottom:0;left:50px;right:30px}.cropper-view__wrap[_ngcontent-%COMP%]{position:relative;padding:25px;max-width:382px}.cropper-view__wrap[_ngcontent-%COMP%]:before{content:"";position:absolute;top:40px;right:40px;bottom:40px;left:40px;box-shadow:0 0 80px #00000080}.cropper-view__wrap[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background:url(/assets/img/cropper/cropper-border.png) no-repeat center;background-size:100% 100%;z-index:1}.cropper-view__pic[_ngcontent-%COMP%]{display:none;width:auto;height:auto}.cropper-view__canvas[_ngcontent-%COMP%]{display:block;position:relative;z-index:2;cursor:all-scroll;-webkit-user-select:none;user-select:none;touch-action:none}@media all and (min-width: 768px){.cropper-pic__txt[_ngcontent-%COMP%]{order:0}.cropper-pic__wrap[_ngcontent-%COMP%]{order:2;margin-bottom:10px;align-items:center}.cropper-pic__controls[_ngcontent-%COMP%]{order:1;text-align:right}.cropper-pic__view[_ngcontent-%COMP%]{width:50%;margin-bottom:0}.cropper-pic__title[_ngcontent-%COMP%]{display:block;width:100%;margin-bottom:10px}.cropper-pic__buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;width:50%;padding-left:30px;justify-content:center;text-align:center;-webkit-user-select:none;user-select:none}.cropper-pic__separate[_ngcontent-%COMP%]{display:none}.cropper-pic__row[_ngcontent-%COMP%]{width:100%}}@media all and (min-width: 1024px){.cropper-pic[_ngcontent-%COMP%]{padding:40px 0}.cropper-pic__txt[_ngcontent-%COMP%]{font-size:17px;margin-bottom:118px}.cropper-pic__wrap[_ngcontent-%COMP%]{margin-bottom:25px}.cropper-pic__title[_ngcontent-%COMP%]{font-size:18px}.cropper-pic__btn[_ngcontent-%COMP%]{box-shadow:0 0 10px transparent;transition:box-shadow .3s ease;width:70px;height:70px;margin:0 10px 20px}.cropper-pic__btn[_ngcontent-%COMP%]:hover{box-shadow:0 0 10px #0000001a}.cropper-pic__btn[_ngcontent-%COMP%]:before, .cropper-pic__btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}.cropper-pic__view_postcard[_ngcontent-%COMP%]   .cropper-view__wrap[_ngcontent-%COMP%]{border-width:20px}.cropper-pic__view_envelop[_ngcontent-%COMP%]   .cropper-view[_ngcontent-%COMP%]{padding-right:0}.cropper-pic__view_envelop[_ngcontent-%COMP%]   .cropper-view__size_2[_ngcontent-%COMP%]{left:50px}.cropper-view[_ngcontent-%COMP%]{padding:0 30px 50px 50px}.cropper-view__size[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:22px;top:20px}.cropper-view__wrap[_ngcontent-%COMP%]{padding:32px 45px}}']}),r})();const W=["cropper"],L=["cropperWrap"],U=["formatWrap"],q=["imagePreview"];function Q(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"app-file-btn",24),t.NdJ("imageData",function(o){return t.CHM(e),t.oxw().getFileData(o)})("scrollToCropper",function(){return t.CHM(e),t.oxw().onScrollToCropper()}),t.qZA()}if(2&r){const e=t.oxw();t.Q6J("fileBtnConfig",e.fileBtnConfig)("constructorConfig",e.constructorConfig)("fileBtnText",e.stepData.inputFile)}}function Y(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"app-uploaded-pic",25),t.NdJ("onDeleteFile",function(o){return t.CHM(e),t.oxw().deleteFile(o)}),t.qZA()}if(2&r){const e=t.oxw();t.Q6J("files",e.files)}}function G(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"app-format-wrap",26,27),t.NdJ("changeRatio",function(o){return t.CHM(e),t.oxw().changeRatio(o)}),t.qZA()}if(2&r){const e=t.oxw();t.Q6J("imageProperties",e.imageProperties)}}function X(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"app-cropper-pic",28,29),t.NdJ("cancelEdit",function(){return t.CHM(e),t.oxw().cancelEdit()})("hideEdit",function(){return t.CHM(e),t.oxw().hideEdit()}),t.qZA()}if(2&r){const e=t.oxw();t.Q6J("cropperConfig",e.cropperConfig)}}function V(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"div",30)(1,"button",31),t.NdJ("click",function(){return t.CHM(e),t.oxw().onContinue()}),t._uU(2),t.ALo(3,"translate"),t.qZA()()}2&r&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"button.continue")))}function $(r,s){if(1&r&&(t.TgZ(0,"div",30)(1,"button",32),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&r){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.form.invalid),t.xp6(1),t.Oqu(t.lcZ(3,2,"button.continue"))}}let K=(()=>{class r{constructor(e,i,o){this._filesListService=e,this._storeService=i,this._router=o,this.canShowSubmitBtn=!1,this.cropperConfig={fileIndex:0,imageSrc:"",image:{resolution:{width:0,height:0},size:{width:"",height:""}},imagesToFill:{type:"",imageNumber:[]}},this.files=[],this.imageChangedEvent="",this.imageSrc="",this.totalLists=1,this._currentFileInFileList=0,this.stepData={inputFile:"",checkboxText:""},this.fileBtnConfig={type:"",imageNumber:[]},this.addBackgroundBtnConfig={type:"",imageNumber:[]},this.addStampBtnConfig={type:"",imageNumber:[]},this.constructorConfig={type:"",costPerPage:0,costPerItem:"",stamp:{resolution:{width:0,height:0},size:{width:"",height:""}},background:{resolution:{width:0,height:0},size:{width:"",height:""}}},this.scrollToStep2=new t.vpe}calculateTotalPrice(){var e;const i=null===(e=this.form.get("totalLists"))||void 0===e?void 0:e.value;!Number.isNaN(i)&&""!==i&&(this.totalLists=i,this.totalPrice=this.costPerPage*i)}cancelEdit(){this.hideEdit(),this._filesListService.removeLastFile(),this.updateFileList(),this.scrollToStep2.emit()}changeRatio(e){const i={resolution:{width:e.resolution.width,height:e.resolution.height},size:{width:e.size.width,height:e.size.height}};this.cropperConfig=Object.assign(Object.assign({},this.cropperConfig),{image:i}),this._formatWrap.updateData(i),this._cropper.updateData(),this._imagePreview.rotatePreview(i)}deleteFile(e){this._filesListService.deleteItem(e),this.files=this._filesListService.getFilesList(),this._storeService.deleteImageFromOrder(e),this._currentFileInFileList===e&&this.hideEdit(),this.canShowSubmitBtn=this.fullnessCheck()}fullnessCheck(){if(this.constructorConfig.background&&!this._storeServiceOrder.images.background.src)return!1;if(this.constructorConfig.totalStamps){if(this._storeServiceOrder.images.front.length<this.constructorConfig.totalStamps)return!1;for(let e=0;e<this._storeServiceOrder.images.front.length;e++)if(!this._storeServiceOrder.images.front[e])return!1}return!0}getFileData(e){this._filesListService.addNewFile(e.fileName),this.updateFileList(),this.imageSrc=e.imageSrc,this._currentFileInFileList=this.files[this.files.length-1].index,this.cropperConfig={fileIndex:this._filesListService.getLastIndex(),image:{resolution:{width:e.image.resolution.width,height:e.image.resolution.height},size:{width:e.image.size.width,height:e.image.size.height}},imageSrc:this.imageSrc,imagesToFill:{type:e.imagesToFill.type,imageNumber:e.imagesToFill.imageNumber.concat()}},this.imageProperties={resolution:{width:e.image.resolution.width,height:e.image.resolution.height},size:{width:e.image.size.width,height:e.image.size.height}}}goToDeliveryClearancePage(){this._router.navigate(["/delivery-clearance"])}hideEdit(){this.imageSrc="",this._currentFileInFileList=0,this.cropperConfig={fileIndex:0,imageSrc:"",image:{resolution:{width:0,height:0},size:{width:"",height:""}},imagesToFill:{type:"",imageNumber:[]}},this._storeService.currentSelect.next("")}initForm(){this.form=new c.cw({totalLists:new c.NI("1",[c.kI.min(1),c.kI.pattern("^[0-9]+$"),c.kI.required]),confirmation:new c.NI(!1,[c.kI.requiredTrue])})}ngOnDestroy(){this._storeServiceSubscriber.unsubscribe()}ngOnInit(){this._filesListService.clearFilesList(),this.updateFileList(),this.initForm(),this.costPerPage=this.constructorConfig.costPerPage,this.calculateTotalPrice(),this._storeServiceSubscriber=this._storeService.order.subscribe(e=>{this._storeServiceOrder=e})}onContinue(){this._cropper.onContinue(),this.scrollToStep2.emit(),this.canShowSubmitBtn=this.fullnessCheck()}onScrollToCropper(){this.scroll(this._cropperWrap.nativeElement)}scroll(e){e.scrollIntoView({behavior:"smooth"})}submit(e){this.form.valid&&(this._storeService.order.next(Object.assign(Object.assign({},this._storeServiceOrder),{totalCost:this.totalPrice,totalPages:this.totalLists})),this.goToDeliveryClearancePage())}totalListsChange(){this.calculateTotalPrice()}updateFileList(){this.files=this._filesListService.getFilesList()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(C.l),t.Y36(h.d),t.Y36(u.F0))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-edit-form"]],viewQuery:function(e,i){if(1&e&&(t.Gf(W,5),t.Gf(L,5),t.Gf(U,5),t.Gf(q,5)),2&e){let o;t.iGM(o=t.CRH())&&(i._cropper=o.first),t.iGM(o=t.CRH())&&(i._cropperWrap=o.first),t.iGM(o=t.CRH())&&(i._formatWrap=o.first),t.iGM(o=t.CRH())&&(i._imagePreview=o.first)}},inputs:{stepData:"stepData",fileBtnConfig:"fileBtnConfig",addBackgroundBtnConfig:"addBackgroundBtnConfig",addStampBtnConfig:"addStampBtnConfig",constructorConfig:"constructorConfig"},outputs:{scrollToStep2:"scrollToStep2"},decls:51,vars:41,consts:[[1,"edit-form",3,"formGroup","ngSubmit"],[1,"edit-form__constructor"],[1,"site__row"],[1,"col-xs-12","col-sm-4","edit-form__preview"],[3,"addBackgroundBtnConfig","addStampBtnConfig","constructorConfig","scrollToCropper","imageData"],["imagePreview",""],[1,"col-xs-12","col-sm-8","edit-form__wrap"],[3,"fileBtnConfig","constructorConfig","fileBtnText","imageData","scrollToCropper",4,"ngIf","ngIfElse"],["uploadedPic",""],[1,"edit-form__info"],[1,"edit-form__row"],[1,"edit-form__row-item"],["for","total-lists",1,"edit-form__title"],["appearance","outline"],["type","number","id","total-lists","name","total-lists","formControlName","totalLists","min","1","matInput","",3,"change"],[1,"edit-form__title"],[1,"edit-form__txt"],[1,"col-xs-12","col-sm-6"],[1,"edit-form__check"],[3,"confirmation","checkboxText"],["cropperWrap",""],[3,"imageProperties","changeRatio",4,"ngIf"],[3,"cropperConfig","cancelEdit","hideEdit",4,"ngIf"],["class","edit-form__btn",4,"ngIf"],[3,"fileBtnConfig","constructorConfig","fileBtnText","imageData","scrollToCropper"],[3,"files","onDeleteFile"],[3,"imageProperties","changeRatio"],["formatWrap",""],[3,"cropperConfig","cancelEdit","hideEdit"],["cropper",""],[1,"edit-form__btn"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn",3,"disabled"]],template:function(e,i){if(1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(n){return i.submit(n)}),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-image-preview",4,5),t.NdJ("scrollToCropper",function(){return i.onScrollToCropper()})("imageData",function(n){return i.getFileData(n)}),t.qZA()(),t.TgZ(6,"div",6),t.YNc(7,Q,1,3,"app-file-btn",7),t.YNc(8,Y,1,1,"ng-template",null,8,t.W1O),t.TgZ(10,"div",9)(11,"p"),t._uU(12),t.ALo(13,"translate"),t.qZA()(),t.TgZ(14,"div",10)(15,"div",11)(16,"label",12),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"mat-form-field",13)(20,"input",14),t.NdJ("change",function(){return i.totalListsChange()}),t.qZA()()(),t.TgZ(21,"div",11)(22,"div",15),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"div",16),t._uU(26),t.ALo(27,"number"),t.ALo(28,"translate"),t.qZA()(),t.TgZ(29,"div",11)(30,"div",15),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"div",16),t._uU(34),t.ALo(35,"number"),t.ALo(36,"translate"),t.qZA()()(),t.TgZ(37,"div",2)(38,"div",17)(39,"div",15),t._uU(40),t.ALo(41,"translate"),t.qZA()(),t._UZ(42,"div",17),t.qZA(),t.TgZ(43,"div",18),t._UZ(44,"app-nice-check",19),t.qZA()()()(),t.TgZ(45,"div",null,20),t.YNc(47,G,2,1,"app-format-wrap",21),t.YNc(48,X,2,1,"app-cropper-pic",22),t.qZA(),t.YNc(49,V,4,3,"div",23),t.YNc(50,$,4,4,"div",23),t.qZA()),2&e){const o=t.MAs(9);t.Q6J("formGroup",i.form),t.xp6(4),t.Q6J("addBackgroundBtnConfig",i.addBackgroundBtnConfig)("addStampBtnConfig",i.addStampBtnConfig)("constructorConfig",i.constructorConfig),t.xp6(3),t.Q6J("ngIf",0===i.files.length)("ngIfElse",o),t.xp6(5),t.Oqu(t.lcZ(13,21,"steps.step2.extension")),t.xp6(5),t.Oqu(t.lcZ(18,23,"steps.step2.totalPages")),t.xp6(6),t.Oqu(t.lcZ(24,25,"steps.step2.pageCost")),t.xp6(3),t.AsE("",t.xi3(27,27,i.costPerPage/100,"1.2-2")," ",t.lcZ(28,30,"currency.uah"),""),t.xp6(5),t.Oqu(t.lcZ(32,32,"steps.step2.totalCost")),t.xp6(3),t.AsE("",t.xi3(35,34,i.totalPrice/100,"1.2-2")," ",t.lcZ(36,37,"currency.uah"),""),t.xp6(6),t.hij("",t.lcZ(41,39,"steps.step2.totalStamps")," 6"),t.xp6(4),t.Q6J("confirmation",i.form.get("confirmation"))("checkboxText",i.stepData.checkboxText),t.xp6(3),t.Q6J("ngIf",i.imageSrc&&"postcard"===i.constructorConfig.type),t.xp6(1),t.Q6J("ngIf",i.imageSrc),t.xp6(1),t.Q6J("ngIf",i.imageSrc),t.xp6(1),t.Q6J("ngIf",i.canShowSubmitBtn)}},directives:[c._Y,c.JL,c.sg,g,m.O5,y,F,I.KE,c.wV,c.qQ,c.Fj,Z.Nt,c.JJ,c.u,B.f,A,J],pipes:[T.X$,m.JJ],styles:[".edit-form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{margin-bottom:0}.edit-form__constructor[_ngcontent-%COMP%]{padding-bottom:20px}.edit-form__preview[_ngcontent-%COMP%]{margin-bottom:30px}.edit-form__preview[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{margin-bottom:0}.edit-form__add[_ngcontent-%COMP%]{margin-bottom:15px}.edit-form__info[_ngcontent-%COMP%]{margin-bottom:15px;line-height:1.3;font-size:12px;color:var(--font-color-1)}.edit-form__info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:inherit;font-size:inherit;color:inherit}.edit-form__info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.edit-form__row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:0 -15px}.edit-form__row-item[_ngcontent-%COMP%]{padding:0 15px;width:100%;margin-bottom:15px}.edit-form__title[_ngcontent-%COMP%]{display:block;margin-bottom:15px;color:var(--font-color-1);font-size:12px;line-height:1.3}.edit-form__input-text[_ngcontent-%COMP%], .edit-form__txt[_ngcontent-%COMP%]{font-family:Rubik,sans-serif;font-weight:400;font-size:14px;color:var(--font-color-2);transition:border-color .3s ease}.edit-form__input-text.ng-invalid.ng-touched[_ngcontent-%COMP%], .edit-form__txt.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:var(--border-color-invalid)}.edit-form__input-text[_ngcontent-%COMP%]{border:1px solid var(--border-color);border-radius:4px;height:60px;width:115px;padding:0 10px}.edit-form__check[_ngcontent-%COMP%]{margin-bottom:15px}.edit-form__btn[_ngcontent-%COMP%]{text-align:center}.edit-form__wrap[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{margin-bottom:0}.edit-form__share[_ngcontent-%COMP%]{text-align:right;max-width:280px}@media screen and (min-width: 768px){.edit-form__preview[_ngcontent-%COMP%]{margin-bottom:0}.edit-form__btn[_ngcontent-%COMP%]{text-align:left}}@media screen and (min-width: 1024px){.edit-form__constructor[_ngcontent-%COMP%]{padding-bottom:15px}.edit-form__info[_ngcontent-%COMP%]{padding-left:25px;margin-bottom:36px;font-size:14px}.edit-form__row[_ngcontent-%COMP%]{margin-bottom:22px}.edit-form__row-item[_ngcontent-%COMP%]{width:33.3333%;margin:0}.edit-form__row-item[_ngcontent-%COMP%]:nth-child(2){padding-left:83px}.edit-form__row-item[_ngcontent-%COMP%]:last-child{text-align:right}.edit-form__title[_ngcontent-%COMP%]{font-size:14px;margin-bottom:14px}.edit-form__input-text[_ngcontent-%COMP%], .edit-form__txt[_ngcontent-%COMP%]{font-size:16px;padding-top:27px}.edit-form__input-text[_ngcontent-%COMP%]{height:70px;width:167px;padding:0 28px}.edit-form__check[_ngcontent-%COMP%]{padding-top:6px}.edit-form__btn[_ngcontent-%COMP%]{padding-top:35px}}"]}),r})()},3100:(S,f,_)=>{_.d(f,{b:()=>O});var t=_(9808),c=_(6435);let C=(()=>{class a{}return a.\u0275fac=function(g){return new(g||a)},a.\u0275mod=c.oAB({type:a}),a.\u0275inj=c.cJS({imports:[[t.ez]]}),a})(),h=(()=>{class a{}return a.\u0275fac=function(g){return new(g||a)},a.\u0275mod=c.oAB({type:a}),a.\u0275inj=c.cJS({imports:[[t.ez]]}),a})();var u=_(821),m=_(7219);let v=(()=>{class a{}return a.\u0275fac=function(g){return new(g||a)},a.\u0275mod=c.oAB({type:a}),a.\u0275inj=c.cJS({imports:[[t.ez,u.aw]]}),a})();var d=_(3075),w=_(520);let P=(()=>{class a{}return a.\u0275fac=function(g){return new(g||a)},a.\u0275mod=c.oAB({type:a}),a.\u0275inj=c.cJS({imports:[[t.ez]]}),a})(),x=(()=>{class a{}return a.\u0275fac=function(g){return new(g||a)},a.\u0275mod=c.oAB({type:a}),a.\u0275inj=c.cJS({imports:[[t.ez]]}),a})();var b=_(4106),M=_(7531);let O=(()=>{class a{}return a.\u0275fac=function(g){return new(g||a)},a.\u0275mod=c.oAB({type:a}),a.\u0275inj=c.cJS({imports:[[t.ez,C,h,u.aw,m.S,v,d.UX,d.u5,w.JF,P,x,b.lN,M.c]]}),a})()}}]);